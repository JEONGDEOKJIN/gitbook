# 관계 대수 & 관계 해석



#### 관계 대수 기호 표현 모음

```
σ등급=′gold′∧나이≥25​(고객)
```

σ ⨝ π

\


## 관계 대수 & 관계 해석

* 관계 대수
  * 절차적인 언어
  * relation 가져오기 위해, 이렇게 이렇게 이렇게 해라
  * 반드시 알아야 하는 것 (시험 나오는 것)
    * 순수 관계 연산자, 집합 연산자 종류 기억
  * 키워드
    * 대어해무
    * 어떻게' ⭐⭐⭐
* 관계 해석
  * 비절차적인 언어
  * relation 가져오기 위해, 이렇게 저렇게 필요없고, 그냥 데이터 가져와라
  * 반드시 알아야 하는 것 (시험 나오는 것)
    * 정량자 종류 기억
  * 키워드
    * 대어해무
    * 어떻게' ⭐⭐⭐

\


### 문제 풀이

![](https://i.imgur.com/QnLX5lU.png)

#### 01.  고객  릴레이션에서  등급이  gold 인  고객들을  검색하는  관계대수를  작성하시오

```
[코드 읽기]
'고객 테이블' 에서 가져올 거임 
조건 : 어디서 가져와? 등급 = gold , 아톰 기호(σ) 사용
```

* 답

```sql
σ등급 = 'gold'(고객)
```

\


#### 02.  고객  릴레이션에서  등급이  gold이고  나이가  25 이상인  고객들을  검색하는  관계대수를  작성하시오.

* 답

```sql
σ등급=′gold′∧나이≥25​(고객)
```

\


#### 03.  고객  릴레이션에서  고객아이디와  등급을  가져오는  관계대수를  작성하시오

```
필드, 를 가져오는 건 파이 기호(π)
```

* 답

```sql
π고객아이디,등급​(고객)
```

#### 04.  고객  릴레이션에서  등급이  gold인  고객의  고객아이디와  등급을  가져오는  관계대수를  작성하시오 ⭐⭐⭐ | #공부방법 , #접근방법

* 만들어야 하는 표 ![](https://i.imgur.com/uplJk4w.png)

```
특징적인 건, 
- 등급은 gold 라는 정해진 데이터를 가져오고 
- 고객 아이디는 아무거나 가져온다는 것 
이때, 어떤 명령어들을 써야 할까 ?
```

* 어떻게 접근?

```bash
'이런 표'를 그려야 함 (⭐프로그래밍 언어의 관점에서 사고하는게 아니라, 중학생에게 지금 상황을 쉽게 이해시킬 수 있는 접근, 쉽게 뭘 하는지를 정의하는게 중요하다고 생각함⭐⭐)

'관계 대수의 관점' 에서 '어떤 명령어를 쓰는지' 알아보기
```

* 풀이 과정

```sql
select 랑 파이를 같이 

1. σ 등급='gold'(고객) 👉 고객이 gold 인 record set 이 나오게 됨. ⭐⭐ 3개행이 만들어짐 

2. 이 record set 중 내가 필요한 field 는 '고객 아이디, 등급' 임 
이걸 어디서 가져와라? 방금 만든 3개 행에서 가져와라! 

따라서, π고객아이디,등급(σ 등급='gold'(고객))

```

* 답

```sql
π고객아이디,등급(σ 등급='gold'(고객))
```

#### 05.  다음  SQL 문장과  동일한  관계대수를  작성하시오

![](https://i.imgur.com/eNAI8hL.png)

* 궁금증❓❓❓

```
관계 대수는 언제 쓰는거야? 
왜 SQL 과 별도로 갈라진거야? 
SQL 이랑 관계 대수는 다른거였네? 
```

* 풀이

```sql
```

* 답

```SQL
π SNO,NAME ( σAGE>20  (STUDENT) )
```

\


#### 06.  다음  SQL 문장과  동일한  관계대수를  작성하시오 #📛잘모르겠음

![](https://i.imgur.com/UHTi29T.png)

* 풀어보기

```
ON 이걸 모르겠음 -> 이건 JOIN 할 때의 '조건' 을 의미
```

* 필기

```sql
[문제 코드 읽어보기]

FROM T1, T2 
	- 이게, T1 테이블과 T2 테이블이 'JOIN' 할거야~
	- JOIN 하는게 뭔데? 

ON T1.SNO = T2.SNO
	- JOIN 의 조건은 T1 테이블의 SNO 와 T2 테이블의 SNO 가 같은 것
	- 이렇게 해서 JOIN 결과 '하나의 relation' 이 만들어진다 ⭐⭐⭐

SELECT SNO, NAME
	- 위에서 만들어진 '하나의 relation' 에 대해서, 'SNO, NAME' 필드를 가져온다 ⭐⭐ 

```

* 플이 과정 및 답 ⭐⭐⭐

```SQL
1. (T1  ⨝ T1.SNO = T2.SNO T2
	 - ⨝ :  T1 이랑 T2 랑 join 할 것 임. 그러면, 어떤 조건으로 할거야? 
	 - T1.SNO = T2.SNO : 이건 조건으로 T1 이랑 T2 를 JOIN 할거야 
		 - 이렇게 하고 나면 하나의 relation 이 만들어지게 되어 있음! 

2.  π SNO, NAME ( 위에서 만들어진 relation)
	 - 위에서 만들어진 relation 중에서 SNO, NAME 필드 값들을 가져온다.  

3. 최종 답 
	π SNO, NAME ( (T1 ⨝ T1.SNO = T2.SNO T2) )
```

### 07. 다음  관계대수식을  적용한  결과를  작성하시오. ⭐⭐ #이중join문제

* 문제 ![](https://i.imgur.com/pFRcQls.png)
* 풀이 과정 (접근법)

```BASH
1. 안쪽 괄호 부터 해결해 나간다. -> (정책 ⨝ 제안자 = 직원번호 직원) 에 집중

2. 'JOIN 연산' 을 해서 -> '1차 relation' 만들어 내기 
	- 어떤 필드를 기준으로 합치는지를 본다. (기준이 되는 2개의 field 가 합쳐져서, JOIN 되어서, 1개의 relation 이 된다.)
	- 하나씩 하나씩 row(record) 를 만들어낸다. 

3. '1차 relation 에 대해' 해당 필드(정책명, 이름, 부서) select(π) 하기 -> '2차 relation' 이 나오게 됨 

4. '부서 relation' 과 '2차 relation' 간 JOIN -> '3차 relation' 나옴 

5. '3차 relation' 에서 해당 필드(이름, 부서명, 정책명) select 하기 
```

* JOIN 연산 풀기 예시\_1 : 제안자와 직원번호가 같은걸 이어서 -> 하나의 row(record) 를 만든다. ![](https://i.imgur.com/IeNbYQh.png)
* JOIN 연산 풀기 예시\_2 : 하나씩 record 를 쌓으면, 이렇게 하나의 relation 이 된다. ![](https://i.imgur.com/9hpZFld.png)
* '1차 relation 에 대해' 해당 필드 select(π) 하기 ![](https://i.imgur.com/jJZFStk.png)
* '부서 relation' 과 '2차 relation' 간 JOIN ![](https://i.imgur.com/dQ25GBI.png)
* '3차 relation' 에서 해당 필드(이름, 부서명, 정책명) select 하기 ![](https://i.imgur.com/LeDGYxh.png)

\


### 08\_아래의  R과 S, 두  릴레이션에  대한  R ÷ S의  결과와 DIVISION 연산의  정의를  작성하시오

![](https://i.imgur.com/khZWQ47.png)

* 풀이 과정

```sql
1. '매칭 기준' 만들기 
	- 매칭 기준 :  S 테이블을 볼 때, 'D2필드  = 1, D3필드 = A' 이면 -> 매칭! 된다.

2. 매칭 시키켜서 '선택' 하기
	- 다른 테이블로 가서, 매칭 기준에 부합하는 row 를 선택한다. 
	- R 테이블의 경우, 'D2필드  = 1, D3필드 = A' 인 row 는 2개 다. 

3. '결과 튜플 선택' 하기 (매칭 조건을 제외하고 남은 record 를 가져오기) 
	- 매칭 조건 제외하고 남은 튜플(row,record) 는 D1 = a , D1 = b 임. 
	- `조건 테이블`에 ⭐⭐없는 속성⭐⭐만을 선택하여 결과를 구성
```

* 답 ![](https://i.imgur.com/1hW1dfr.png)

\


### 09.  다음 릴레이션 R1 과 R2 에 대한 관계대수 R1  ÷  R2 의 결과  릴레이션을  작성하시오 #틀림

![](https://i.imgur.com/QEjPfvd.png)

* 놓친 부분

```bash
- '매칭 기준' 을 '전부 다' 갖고 있어야 함. 하나라도 없으면 안 돼! ⭐⭐⭐ 
- 그래서, C2 중 A,B 를 전부 다 갖고 있는 C1 을 골라야 해! ⭐⭐⭐ 
```

* 답 ![](https://i.imgur.com/cXwyVzM.png)

\


### 10. 관계 해석 연산자

![](https://i.imgur.com/0wL20dB.png)

```bash
- 튜플 = row, record
- all 을 거꾸로 해서 -> '모든 가능한 튜플'
- 가능한, 어떤, 하나라도 -> E 를 거꾸로
```

## 회고 ⭐⭐⭐

### 부족한 점 | 궁금한 점

```bash
1. 현재, JOIN 에 대한 개념이 안 잡혀 있음. 

2. JOIN 시 필드가 하나로 합쳐지는 걸로 이해했는데, 그러면, field 이름 중복이 발생하지 않나? 그러면, 하나를 선택해야 하는 거 아닌가? 

3. ✅ 차집합, 교집합도 가능있음. 본문 읽고 확인하자.
```

### 알게 된 점

```BASH
- '전체 relation' 에서 👉 작은, '1차 relation' 을 만든다. 
	- 이때, 구체적인 값(SQL 에서는 조건, 관계 대수에서는 특정한 값에 해당하는) 을 기준으로 1차 relation 을 만든다. 

- '1차 relation 을 기준'으로 👉 '원하는 field' 를 가져온다. 

```
